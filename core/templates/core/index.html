{% extends 'core/base.html' %}

{% load static i18n %}
{% get_current_language as language_code %}

{% block title %}
    {% trans 'Welcome' %}
{% endblock %}

{% block content %}
    <div class="mt-6 px-6 py-12 bg-gray-100 rounded-xl">
        <h2 class="mb-12 text-2xl text-center">{% trans 'News' %}</h2>

        <div class="grid grid-cols-3 gap-3">
            
        </div>
    </div>

    <div class="mt-6 px-6 py-12 bg-gray-100 rounded-xl">
        <h2 class="mb-12 text-2xl text-center">{% trans 'Newest items' %}</h2>

        <div class="grid xl:md:lg:grid-cols-4 md:grid-cols-3 sm:grid-cols-2 gap-3">
            {% for item in items %}
                <div class="">
                    <a href="{% url 'item:detail' item.id %}">
                        <div>
                            <img src="{{ item.image.url }}" class="rounded-t-xl w-screen max-w-40">
                        </div>

                        <div class="p-6 bg-white rounded-b-xl">
                            <h2 class="text-xl">&#171;{{ item.name }}&#187;, {{ item.author }}</h2>
                            <br>
                            <p class="text-gray-500 font-medium">
                                {% if item.price %}
                                    {% if item.is_swap %}
                                        {% if item.price %}
                                            {{ item.price }} ₸, {% trans 'Обмен' %}
                                        {% else %}
                                            {% trans 'Обмен' %}
                                        {% endif %}
                                    {% else %}
                                        {{ item.price }} ₸
                                    {% endif %}
                                {% else %}
                                    {% if item.price == 0 %}
                                        {{ item.price }} ₸,
                                    {% endif %}
                                    {% trans 'Бесплатно' %}
                                {% endif %}
                            </p>
                        </div>
                    </a>
                </div>
            {% endfor %}
        </div>
    </div>

    <div class="mt-6 px-6 py-12 bg-gray-100 rounded-xl">
        <h2 class="mb-12 text-2xl text-center">{% trans 'Categories' %}</h2>

        <div class="grid grid-cols-3 gap-3">
            {% for category in categories %}
                <div>
                    <a href="{% url 'item:items' %}?category={{ category.id }}">
                        <div>
                            <img src="{{ category.image.url }}" class="rounded-t-xl">
                        </div>
                        <div class="p-6 bg-white rounded-b-xl">
                            <h2 class="text-2xl">
                                {% for lang_code, translation in category.name_translations.items %}
                                    {% if lang_code == LANGUAGE_CODE %}
                                        {{ translation }}
                                    {% endif %}
                                {% empty %}
                                    {{ category.name }}
                                {% endfor %}
                            </h2>
                            <p class="text-gray-500">{{ category.items.count }} {% trans 'items' %}</p>
                        </div>
                    </a>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}